###############################################################
# CINEMATIC V2 - BUTTON CARD TEMPLATES
# Location: config/lovelace/templates/cinematic_v2_templates.yaml
#
# Self-contained template set for the cinematic-v2 dashboard.
# Loaded by: lovelace/cinematic-v2.yaml
# Does NOT modify the existing button_card_templates.yaml.
#
# Sensor corrections vs experiments/cinematic-header/:
#   sensor.header_time            → sensor.header_current_time
#   sensor.header_presence_summary → sensor.family_presence_summary
#   sensor.header_weather_summary  → sensor.header_weather_summary (unchanged)
###############################################################


# ==============================================================
# GLOBAL TEMPLATES
# Shared base styles used by all other templates.
# ==============================================================

section_header:
  styles:
    card:
      - background: var(--section-header-bg)
      - padding: 12px 16px
      - border-radius: 12px
      - font-size: 1.2rem
      - font-weight: 600
      - color: var(--section-header-text)
      - box-shadow: none
  tap_action:
    action: none

base_block:
  show_icon: false
  show_name: false
  show_state: false
  styles:
    card:
      - background: var(--block-bg)
      - border-radius: 16px
      - padding: 16px
      - box-shadow: var(--block-shadow)
      - color: var(--block-text)


# ==============================================================
# HEADER TEMPLATES
# 3-column header: Time | Weather | Presence
# ==============================================================

header_time_block:
  template: base_block
  show_name: true
  name: "[[[ return states['sensor.header_current_time'].state ]]]"
  styles:
    card:
      - background: transparent
      - box-shadow: none
      - padding: 0
      - margin: 0
    name:
      - font-size: 2rem
      - font-weight: 600
      - color: var(--header-time-color)
      - text-shadow: 0 0 6px var(--header-glow-color)
      - align-self: center
      - justify-self: center
      - line-height: 1.1
  extra_styles: |
    @keyframes headerGlowPulse {
      0%   { box-shadow: 0 0 var(--header-glow-strength) var(--header-glow-color); }
      50%  { box-shadow: 0 0 calc(var(--header-glow-strength) * 1.4) var(--header-glow-color); }
      100% { box-shadow: 0 0 var(--header-glow-strength) var(--header-glow-color); }
    }

header_weather_block:
  template: base_block
  show_icon: false
  show_name: true
  name: >
    [[[ return states['sensor.header_weather_summary'].state ]]]
  styles:
    card:
      - background: transparent
      - box-shadow: none
      - padding: 0
      - margin: 0
    name:
      - font-size: 1.15rem
      - font-weight: 500
      - color: var(--header-weather-color)
      - text-shadow: 0 0 5px var(--header-glow-color)
      - align-self: center
      - justify-self: center
      - line-height: 1.2
      - white-space: nowrap

header_presence_block:
  template: base_block
  show_name: true
  name: >
    [[[ return states['sensor.family_presence_summary'].state ]]]
  styles:
    card:
      - background: transparent
      - box-shadow: none
      - padding: 0
      - margin: 0
    name:
      - font-size: 1.05rem
      - font-weight: 500
      - color: var(--header-presence-color)
      - text-shadow: 0 0 5px var(--header-glow-color)
      - align-self: center
      - justify-self: center
      - line-height: 1.2
      - white-space: nowrap


# ==============================================================
# CARD TEMPLATES
# All inherit from base_block.
# ==============================================================

presence_summary_block:
  template: base_block
  show_name: true
  name: >
    [[[ return states['sensor.family_presence_summary'].state ]]]
  styles:
    card:
      - padding: 20px
    name:
      - font-size: 1.1rem
      - font-weight: 500

weather_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 48px
      - height: 48px
      - color: var(--weather-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8

climate_overview_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 48px
      - height: 48px
      - color: var(--climate-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8

humidity_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 48px
      - height: 48px
      - color: var(--humidity-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8

lighting_overview_block:
  template: base_block
  show_icon: true
  show_name: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 40px
      - height: 40px
      - color: var(--lighting-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600

scene_selector_block:
  template: base_block
  show_icon: true
  show_name: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 36px
      - height: 36px
      - color: var(--scene-icon-color)
    name:
      - font-size: 1.1rem
      - font-weight: 600

media_now_playing_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 48px
      - height: 48px
      - color: var(--media-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8

media_devices_block:
  template: base_block
  show_icon: true
  show_name: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 40px
      - height: 40px
      - color: var(--media-device-icon-color)
    name:
      - font-size: 1.1rem
      - font-weight: 600

system_overview_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 40px
      - height: 40px
      - color: var(--system-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8

network_status_block:
  template: base_block
  show_icon: true
  show_name: true
  show_state: true
  styles:
    card:
      - padding: 20px
    icon:
      - width: 40px
      - height: 40px
      - color: var(--network-icon-color)
    name:
      - font-size: 1.2rem
      - font-weight: 600
    state:
      - font-size: 1rem
      - opacity: 0.8


# ==============================================================
# UTILITY TEMPLATES
# Composable helpers — mix in via template: [name]
# ==============================================================

fade_in:
  styles:
    card:
      - animation: fadeIn 0.6s ease-out
  extra_styles: |
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

soft_glow:
  styles:
    card:
      - box-shadow: 0 0 20px var(--soft-glow-color)

gradient_overlay:
  styles:
    card:
      - background: linear-gradient(to bottom, var(--gradient-top), var(--gradient-bottom))

responsive_padding:
  styles:
    card:
      - padding: 16px
  extra_styles: |
    @media (max-width: 600px) {
      ha-card {
        padding: 12px !important;
      }
    }

icon_tint:
  styles:
    icon:
      - filter: drop-shadow(0 0 4px var(--icon-glow-color))

subtle_text:
  styles:
    name:
      - opacity: 0.85
    state:
      - opacity: 0.7
